#################################################################
# ğŸ”¥ Home Assistant - ×˜×™×™××¨ ×—×›× ×œ×“×•×“ ×¢× ×¡×œ×™×™×“×¨
# ğŸš€ ×ª×™××•×¨: ×©×œ×™×˜×” ×¢×œ ×”×“×•×“ ×¢× ×˜×™×™××¨ ××ª×§×“×, ×›×™×‘×•×™ ××•×˜×•××˜×™ ×•×¡×œ×™×™×“×¨
#################################################################

# âœ… 1. ×˜×™×™××¨ ×œ×“×•×“
timer:
  boiler_timer:
    duration: "00:30:00"
    name: "â³ ×˜×™×™××¨ ×”×“×•×“"
    icon: mdi:timer-outline

# âœ… 2. ×¡×œ×™×™×“×¨ ×œ×§×‘×™×¢×ª ××©×š ×”×”×¤×¢×œ×”
input_number:
  boiler_duration:
    name: "â±ï¸ ××©×š ×”×¤×¢×œ×ª ×”×“×•×“"
    min: 5
    max: 120
    step: 5
    unit_of_measurement: "×“×§×•×ª"
    mode: slider
    icon: mdi:clock-outline

# âœ… 3. ××•×˜×•××¦×™×•×ª ×œ×”×¤×¢×œ×ª ×”×“×•×“ ×•×›×™×‘×•×™ ××•×˜×•××˜×™
automation:
  - alias: "ğŸš€ ×”×¤×¢×œ×ª ×”×“×•×“ ×œ×¤×™ ×¡×œ×™×™×“×¨"
    description: "×›×©×”×“×•×“ × ×“×œ×§, ××¤×¢×™×œ ×˜×™×™××¨ ×¢× ××©×š ××•×ª×× ××™×©×™×ª"
    trigger:
      - platform: state
        entity_id: switch.boiler
        to: "on"
    action:
      - service: timer.start
        entity_id: timer.boiler_timer
        data:
          duration: "{{ states('input_number.boiler_duration') | int }}:00"

  - alias: "ğŸ›‘ ×›×™×‘×•×™ ×”×“×•×“ ×‘×¡×™×•× ×”×˜×™×™××¨"
    description: "×›×™×‘×•×™ ××•×˜×•××˜×™ ×©×œ ×”×“×•×“ ×›××©×¨ ×”×˜×™×™××¨ ××¡×ª×™×™×"
    trigger:
      - platform: event
        event_type: timer.finished
        event_data:
          entity_id: timer.boiler_timer
    action:
      - service: switch.turn_off
        entity_id: switch.boiler

  - alias: "ğŸ”„ ××™×¤×•×¡ ××©×š ×”×˜×™×™××¨ ××—×¨×™ ×›×™×‘×•×™ ×”×“×•×“"
    description: "×›××©×¨ ×”×“×•×“ × ×›×‘×”, ×××¤×¡ ××ª ×”×¡×œ×™×™×“×¨ ×œ×¢×¨×š ×‘×¨×™×¨×ª ××—×“×œ"
    trigger:
      - platform: state
        entity_id: switch.boiler
        to: "off"
    action:
      - service: input_number.set_value
        target:
          entity_id: input_number.boiler_duration
        data:
          value: 30
      - service: timer.finish
        target:
          entity_id: timer.boiler_timer

# âœ… 4. ×›×¨×˜×™×¡ Lovelace ×œ×”×¦×’×ª ×”×‘×§×¨×”
lovelace:
  views:
    - title: "×©×œ×™×˜×” ×¢×œ ×”×“×•×“"
      icon: mdi:water-boiler
      path: boiler_control
      cards:
        - type: entities
          title: "ğŸ’¡ ×‘×§×¨×ª ×“×•×“"
          entities:
            - entity: switch.boiler
              name: "××¦×‘ ×”×“×•×“"
            - entity: input_number.boiler_duration
              name: "â³ ××©×š ×”×¤×¢×œ×”"
            - entity: timer.boiler_timer
              name: "â± ×–××Ÿ × ×•×ª×¨"

# âœ… 5. ×ª××™×›×” ×‘-Slider-Entity-Row (×× ×”×ª×§× ×ª ×“×¨×š HACS)
  - type: entities
    title: "ğŸ”¥ ×‘×§×¨×ª ×“×•×“ ××ª×§×“××ª"
    entities:
      - entity: switch.boiler
        name: "××¦×‘ ×”×“×•×“"
      - type: custom:slider-entity-row
        entity: input_number.boiler_duration
        name: "×§×‘×™×¢×ª ×–××Ÿ ×—×™××•×"
        full_row: true
      - entity: timer.boiler_timer
        name: "â³ ×–××Ÿ × ×•×ª×¨"
